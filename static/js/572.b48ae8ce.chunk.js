"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[572],{50572:function(e,n,t){t.r(n),n.default="# \u6574\u5408 models \u6570\u636e\u6d41\n\n  1. \u7b80\u5316 @rematch/* \u72b6\u6001\u7ba1\u7406\u516c\u5171\u8fdb\u884c\u521d\u59cb\u5316;\n  2. \u7ea6\u5b9a\u662f\u5230 model \u7ec4\u7ec7\u65b9\u5f0f\uff0c\u4e0d\u7528\u624b\u52a8\u6ce8\u518c model\n  3. \u6587\u4ef6\u540d\u5373 name\uff0cmodel \u5185\u5982\u679c\u6ca1\u6709\u58f0\u660e name\uff0c\u4f1a\u4ee5\u6587\u4ef6\u540d\u4f5c\u4e3a name\n  4. \u5185\u7f6e @rematch/loading\uff0c\u76f4\u63a5 loading \u5b57\u6bb5\u4f7f\u7528\u5373\u53ef\n  5. [\u66f4\u591a @rematch/core api](https://rematchjs.org/docs/api-reference)\n\n## \u5b89\u88c5\n\n```bash\nnpm i @uiw-admin/models --save\n```\n\n## store  \n\n> \u7531 @rematch/core \u7684 init \u521d\u59cb\u5316\u751f\u6210\u7684\u72b6\u6001\u5b58\u50a8\n\n## dispatch\n\n> \u66f4\u65b0\u72b6\u6001\u65b9\u6cd5\n\n\n## \u7ea6\u5b9a\u5f0f\u7684 model \u7ec4\u7ec7\u65b9\u5f0f\n\n\u7b26\u5408\u4ee5\u4e0b\u89c4\u5219\u7684\u6587\u4ef6\u4f1a\u88ab\u8ba4\u4e3a\u662f model \u6587\u4ef6\uff0c\n\n  1. src/models \u4e0b\u7684\u6587\u4ef6\n  2. src/pages \u4e0b\uff0c\u5b50\u76ee\u5f55\u4e2d models \u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\n  3. src/pages \u4e0b\uff0c\u5b50\u76ee\u5f55\u4e2d models.ts \u6587\u4ef6\n\n```txt\n\nsrc\n  models/a.ts\n  pages\n    foo/models/b.ts\n    test/models.ts\n\n```\n\n## model \u6821\u9a8c\n\n```ts\nimport { createModel } from '@rematch/core'\nimport { RootModel \uff0cModelDefault} from '@uiw-admin/models'\n\n//------- createModel \u65b9\u5f0f ------ \n// \u901a\u8fc7\nexport default createModel()({name:\"foo\"})\nexport default createModel()({reducers:\"foo\"})\n\n// ts \u7c7b\u578b\u65b9\u5f0f \u901a\u8fc7\nexport default createModel<RootModel>()({name:\"foo\"})\nexport default createModel<RootModel>()({reducers:\"foo\"})\n\n// \u901a\u8fc7\nconst models = createModel()({reducers:\"foo\"})\nexport default models\n\n\n//----- \u76f4\u63a5\u4e00\u4e2a\u5bf9\u8c61\u7684\u65b9\u5f0f ---- \u4e0d\u5efa\u8bae\u4f7f\u7528 ------\n\n// \u901a\u8fc7\nexport default { name: 'foo' };\nexport default { reducers: 'foo' };\n\n// \u901a\u8fc7\nconst model = { name: 'foo' };\nexport default model;\n\n// ts \u7c7b\u578b\u65b9\u5f0f \u901a\u8fc7\nconst model: ModelDefault = { name: 'foo' };\nexport default model;\n\n```\n\n\n## \u7c7b\u578b\n\n\u901a\u8fc7 @uiw-admin/models \u5bfc\u51fa\u7c7b\u578b\uff1a`FullModel`\uff0c`Store`\uff0c`AddModel`\uff0c`Dispatch`\uff0c`RootState`\uff0c`ModelDefault`\uff0c`RootModel`\u3002\n\n## model \u7528\u4f8b\n\n```ts\nimport { RootModel } from '@uiw-admin/models'\nimport { createModel } from '@rematch/core'\nimport { selectById } from '../servers/demo'\n\nconst demo = createModel<RootModel>()({\n  name: 'demo',\n  state: {\n    drawerVisible: false,\n    tableType: '',\n    queryInfo: {},\n    isView: false,\n  },\n  reducers: {\n    updateState: (state: any, payload: any) => ({\n      ...state,\n      ...payload,\n    }),\n  },\n  effects: (dispatch) => ({\n    async selectById(payload: any) {\n      const dph = dispatch\n      const data = await selectById(payload)\n      if (data.code === 200) {\n        dph.demo.updateState({\n          drawerVisible: true,\n          queryInfo: data.data || {},\n        })\n      }\n    },\n    clean() {\n      const dph = dispatch\n      dph.demo.updateState({\n        drawerVisible: false,\n        tableType: '',\n        queryInfo: {},\n        isView: false,\n      })\n    },\n  }),\n})\nexport default demo\n\n\n```\n\n\n## page \u7528\u4f8b\n\n```tsx\nimport React from 'react'\nimport { useDispatch,useSelector } from 'react-redux'\nimport { Dispatch } from '@uiw-admin/models'\nimport { RootState } from '@uiw-admin/models'\n\nconst Demo = () => {\n  const dispatch = useDispatch<Dispatch>()\n  // \u83b7\u53d6 models \u4e2d\u6240\u6709\u7684\u72b6\u6001\n  const store = useSelector( (state: RootState) => state )\n  const updateData = (payload: any) => {\n    dispatch({\n      type: 'demo/updateState',\n      payload,\n    })\n    dispatch.demo.updateState({ a: 1 })\n  }\n  return (\n    <React.Fragment>\n      <button onClick={()=>updateData({c:12})} >\u70b9\u51fb</button>\n    </React.Fragment>\n  )\n}\nexport default Demo\n\n```\n\n## \u8d21\u732e\u8005\n\n\u611f\u8c22\u6240\u6709\u7684\u8d21\u732e\u8005\uff0c\u6b22\u8fce\u5f00\u53d1\u8005\u4e3a\u5f00\u6e90\u9879\u76ee\u8d21\u732e\u529b\u91cf\u3002\n\n<a href=\"https://github.com/uiwjs/uiw-admin/graphs/contributors\">\n  <img src=\"https://uiwjs.github.io/uiw-admin/CONTRIBUTORS.svg\" />\n</a>\n\n## License\n\nLicensed under the MIT License.\n"}}]);
//# sourceMappingURL=572.b48ae8ce.chunk.js.map